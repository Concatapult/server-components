{
  "name": "Server Components",
  "tagline": "An simple & lightweight component framework for Node.js server-side rendering, based on web components.",
  "body": "# Server Components [![Travis Build Status](https://img.shields.io/travis/pimterry/server-components.svg)](https://travis-ci.org/pimterry/server-components)\r\n\r\nAn simple & lightweight component framework for Node.js server-side rendering, based on web components.\r\n\r\nThis is a proof of concept right now, to look at using web components for structure on the server-side, not just the client-side.\r\n\r\nComposable flexible and powerful approaches to building web applications don't have to require heavyweight front-end JS frameworks,\r\nbuildsteps, pre-compilers, and enormous downloads. We can take the same ideas (and standards), apply them directly server side,\r\nand gain all that power without the page weight.\r\n\r\n## Motivation\r\n\r\n```javascript\r\n<html>\r\n<head>\r\n\r\n<social-media-tags name=\"My Page\" image=\"./social-media-image\" ></social-media-tags>\r\n\r\n</head>\r\n<body>\r\n<h1>What am I up to?</h1>\r\n\r\n<social-media-icons twitter=\"pimterry\" github=\"pimterry\" />\r\n\r\n<google-map latitude=\"41.390205\" longitude=\"2.154007\"></google-map>\r\n\r\n<item-feed id=\"minor-events\">\r\n    <twitter-source username=\"pimterry\" />\r\n    <github-source  username=\"pimterry\" type-filter=\"PullRequestEvent\" />\r\n</item-feed>\r\n\r\n<item-feed id=\"manually-curated-content\">\r\n    <manual-source icon=\"./blog-icon\"    source=\"blog-posts\" />\r\n    <manual-source icon=\"./talk-icon\"    source=\"talks-given\" />\r\n    <manual-source icon=\"./project-icon\" source=\"project-events\" />\r\n</item-feed>\r\n\r\n<item-carousel>\r\n    <speakerdeck-source icon=\"./slides-icon\" />\r\n    <manual-source      icon=\"./slides-icon\" source=\"slidesets\" />\r\n</item-carousel>\r\n\r\n<item-carousel>\r\n    <manual-source icon=\"./video-icon\" source=\"talk-videos\" />\r\n    <manual-source icon=\"./photo-icon\" source=\"talk-photos\" />\r\n</item-carousel>\r\n\r\n</body>\r\n</html>\r\n```\r\n\r\nWeb components are a way of composing isolated logic components of UI together. This is useful on the client-side, but is equally\r\nrelevant on the server, where we often want to compose views together too.\r\n\r\nExisting templating languages focus mostly on how data is bound to individual elements on the page, and composing together\r\nelements is something of an after thought. See Mustache's [partials](https://mustache.github.io/mustache.5.html#Partials),\r\nfor example, which provide no isolation and no ability to parameterize their use whatsoever, or Mustache's\r\n[functions](https://github.com/janl/mustache.js/#functions) and Jade's [mixins](http://jade-lang.com/reference/mixins/),\r\nwhich can take basic parameters, but can only really provide basic string transformations. Templating libraries rarely let you\r\nintrospect or interact with the rest of the content they're given, as web components can on the front-end. This simple but powerful\r\nchange opens the possibility to compose together interacting & easily configurable components (see the motivating example above).\r\n\r\nFundamentally these limitations exist because templating libraries typically work purely on flat string. They're given content\r\nthat often defines a clear structure (an HTML DOM hierarchy), but they rarely interpret and use that, throwing away the semantics\r\nand structure of what they're given.\r\n\r\nThis isn't everywhere: a few tools do do this somewhat better, but only with more heavy-weight approaches, almost entirely\r\nonly on the client-side, and diverging substantially from the existing custom elements standard for this. That's all great\r\nif you want to commit to a big framework in which to build your huge single page app, but if you want an simple light-weight\r\nworks-without-javascript easily-accessible fast way to build websites, you need a small standalone tool to render your page\r\nserver-side. You don't need a whole front-end UI framework, with all the page weight and complexity that brings, just to be\r\nable to define and compose together a page of widgets.\r\n\r\nServer Components is solving this: it's a minimal tool to compose together your application UI on the server side.\r\n\r\nIt doesn't dynamically build templates from data (although you can easily layer a typical templating language on top to do so). It\r\ndoesn't allow any logic in templates whatsoever. It allows you to compose together components (who in turn can contain whatever\r\nlogic internally they'd like).\r\n\r\nThis is currently aiming to be structurally the same as front-end custom elements, with the minimal changes required\r\nto make this work in Node, outside the traditional DOM environment. In principle, this compatibility should mean you can take a\r\nserver-side component and render it client-side with no changes (but this is early stages, there's some basic find/replace steps\r\nrequired right now, and generally YMMV).\r\n\r\n## Caveats\r\n\r\nThis is not attempting to polyfill HTML Imports (although it potentially could as an import mechanism in future? Interesting\r\nidea, not sure if that's important), Template tags (unnecessary; all DOM is inert server-side) or the Shadow DOM (technically\r\nchallenging, and less useful server-side).\r\n\r\nCore DOM functionality now built on [Domino](https://github.com/fgnass/domino), so DOM manipulation comes with Domino's\r\nlimitations (no issues so far though).\r\n\r\nFull serious web-component compatible support is probably blocked on https://github.com/tmpvar/jsdom/issues/1030, and I\r\nexpect JSDom performance will block using that for any serious use for quite a while. Domino perf is much better.\r\n\r\nIE 8 and earlier render unknown elements poorly, and will probably render the output of this badly. This is\r\n[solvable](https://blog.whatwg.org/supporting-new-elements-in-ie) in future (although it requires front-end JS), but isn't solved\r\nhere quite yet.\r\n\r\n## Usage\r\n\r\n```javascript\r\n// Define and register an element somewhere\r\n\r\nvar NewElement = serverComponents.newElement();\r\n\r\nNewElement.createdCallback = function () {\r\n    this.innerHTML = \"Hi there\";\r\n};\r\n\r\nserverComponents.registerElement(\"my-new-element\", { prototype: NewElement });\r\n\r\n// Later, render an HTML document that references that element\r\n\r\nserverComponents.render(`\r\n    <html>\r\n    <head></head>\r\n    <body>\r\n        <my-new-element></my-new-element>\r\n    </body>\r\n    </html>\r\n`).then((output) => {\r\n    // Output = \"<html><head></head><body><my-new-element>Hi there</my-new-element></body></html>\"\r\n});\r\n```\r\n\r\n## Progress\r\n\r\n- [x] Allow definition of components\r\n- [x] Render components, triggering the createdCallback and allowing component transformation\r\n- [x] Allow attribute access\r\n- [x] Allow asynchronous rendering\r\n- [x] Allow associating behaviour with component nodes\r\n- [x] Sensibly expose failures in components\r\n- [ ] Only allow components with '-' in the name (as on the front-end)\r\n- [x] Publish on NPM\r\n- [ ] Debug mode: enable per-component to log initial & resulting HTML and all DOM events\r\n- [ ] Allow programmatic component creation & trigger attachedCallbacks\r\n- [ ] Allow rendering of document fragments (not just whole documents)\r\n- [ ] Support type extension elements\r\n- [ ] Work out approaches for loading resources (CSS/images) from components ([PostCSS](https://github.com/outpunk/postcss-modules)?)\r\n- [ ] Document how to use this in detail\r\n- [ ] Document differences with real web components\r\n- [ ] Make it easy to build external easily registered custom element plugins (`serverComponents.use(require('my-element'))`?)\r\n- [ ] Make it easy to integrate server components with a data-binding templating library (e.g. mustache)\r\n- [ ] Make it easy to integrate with Express as a view engine\r\n- [ ] Write a selection of useful components to start with\r\n- [ ] Tests with some common example implementation of existing web components\r\n- [ ] Create transparent front-end support (i.e. translate back to normal web components API internally)\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}